trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(market)), -1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(market)), -1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(rank(cap), range='0.1, 1, 0.1'))), -1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(bucket(group_rank(cap,sector),range='0,1,0.1'))), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 5),densify(sector)), -1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_sum(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 5) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_regression(returns, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), 5, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), 5, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), 5, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_regression(returns, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), 20, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), 20, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), 20, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(industry)), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_zscore(returns,60) > 2, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_arg_min(volume, 5) > 3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_std_dev(returns, 5) > ts_std_dev(returns, 20), group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 5) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(close, 20) == 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 5) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.3, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) > 0.5, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(20), 20, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), abs(returns) > 0.1)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_regression(returns, ts_step(5), 5, lag = 0, rettype = 2) > 0, group_rank(ts_sum(winsorize(ts_backfill(vec_avg(fnd6_ppents), 120), std=4), 120),densify(sector)), -1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), -1)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_arg_max(volume, 5) == 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_corr(close, volume, 20) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), -1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), abs(returns) > 0.1)
trade_when(ts_corr(close, volume, 5) < 0, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), -1)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(ts_mean(volume,10)>ts_mean(volume,60), group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), -1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), abs(returns) > 0.1)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), days_from_last_change(ern3_pre_reptime) > 20)
trade_when(group_rank(ts_std_dev(returns,60), sector) > 0.7, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), -1)
trade_when(ts_zscore(returns,60) > 2, group_rank(-ts_rank(winsorize(ts_backfill(fnd6_loxdr, 120), std=4), 66),densify(sector)), -1)
